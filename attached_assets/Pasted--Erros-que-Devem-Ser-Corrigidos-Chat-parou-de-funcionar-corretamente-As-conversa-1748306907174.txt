âŒ Erros que Devem Ser Corrigidos

    Chat parou de funcionar corretamente:

        As conversas nÃ£o sÃ£o exibidas (ativas e arquivadas).

        O histÃ³rico de mensagens nÃ£o carrega ao abrir uma conversa.

        O envio de mensagens estÃ¡ travado ou inoperante.

    Erro no console ao tentar buscar arquivadas:

GET /api/connections/36/archived-chats 500 (Internal Server Error)

    Esse erro aparece na linha:

    message-interface-complete.tsx:98 âŒ Erro ao buscar arquivados: 500 Internal Server Error

Stack trace da falha (React Query):

    queryFn @ message-interface-complete.tsx:96
    fetchFn @ @tanstack_react-query.js
    ...
    flushSyncCallbacks @ chunk-RPCDYKBN.js

âœ… CorreÃ§Ãµes e Ajustes Solicitados
ğŸ”„ 1. Corrigir a Rota de Arquivados

    Corrigir a falha (erro 500) ao fazer GET /api/connections/:connectionId/archived-chats

    Verificar se o ID da conexÃ£o (connectionId) estÃ¡ sendo passado corretamente no fetch/query.

    Garantir que o backend esteja respondendo JSON vÃ¡lido com status 200.

ğŸ“‚ 2. Reorganizar Interface Visual

    Mover a seÃ§Ã£o de conversas arquivadas para acima da lista de conversas ativas.

    Adicionar um tÃ­tulo claro: ğŸ“‚ Conversas Arquivadas

    Manter a lista de arquivadas visÃ­vel e funcional mesmo se nenhuma estiver arquivada (mostrar mensagem de vazio).

ğŸ—‘ï¸ 3. BotÃµes na interface

Cada conversa arquivada deve ter:

    ğŸ”„ Desarquivar â†’ PUT /api/archived-chats/:chatId/unarchive

    ğŸ—‘ï¸ Excluir permanentemente â†’ DELETE /api/archived-chats/:chatId

    ğŸ”• Silenciar (apenas visual, sem funcionalidade)

    ğŸ·ï¸ Etiquetar (apenas visual, placeholder para uso futuro)

ğŸ’¬ 4. Restaurar funcionalidades do chat

    Corrigir o carregamento do histÃ³rico de mensagens.

    Corrigir o envio de mensagens, garantindo que:

        A caixa de texto esteja habilitada.

        O evento de envio esteja funcionando corretamente.

        O backend esteja recebendo e processando a mensagem.

âš ï¸ Importante

    O erro 500 estÃ¡ impedindo o carregamento da interface inteira.

    A falha na queryFn do React Query estÃ¡ bloqueando renderizaÃ§Ãµes subsequentes.

    A interface deve continuar carregando as conversas ativas normalmente mesmo se a listagem de arquivadas falhar (usar try/catch ou fallback na query).

âœ… Requisitos finais esperados:
Item	Comportamento Esperado
SeÃ§Ã£o Arquivadas	VisÃ­vel acima da lista de conversas ativas
Listagem de Arquivadas	Funcional, com opÃ§Ãµes de aÃ§Ã£o
HistÃ³rico de Mensagens	Carregando corretamente ao abrir uma conversa
Envio de Mensagens	Operacional
API /archived-chats	Respondendo com status 200