üìÑ Prompt completo para suporte t√©cnico (Replit + EvolutionAPI + React/WebSocket)

Ol√°! Estou desenvolvendo uma aplica√ß√£o em React hospedada no Replit, conectada √† EvolutionAPI via WebSocket. Estou enfrentando alguns problemas cr√≠ticos na aplica√ß√£o e preciso de suporte para resolv√™-los. Abaixo segue um relat√≥rio completo com todos os erros, comportamentos incorretos e o que precisa ser corrigido:
‚úÖ FUNCIONALIDADES PARCIALMENTE FUNCIONAIS

    O WebSocket conecta com sucesso no endpoint:

    wss://7c6685d5-f6f3-4410-ab06-262cdc778d87-00-2dsysyogtq3zv.riker.replit.dev/api/ws

    As primeiras 12 conversas s√£o carregadas com nome, telefone, e √∫ltima mensagem.

    Um bot√£o "Carregar mais" aparece.

‚ùå PROBLEMAS ATUAIS
1. Erro de WebSocket com localhost:undefined

Mesmo com a conex√£o funcionando, o console mostra o seguinte erro:

WebSocket connection to 'wss://localhost:undefined/?token=...' failed
Uncaught (in promise) SyntaxError: Failed to construct 'WebSocket': The URL 'wss://localhost:undefined/?token=...' is invalid

üõ† Corre√ß√£o esperada:

    Corrigir esse fallback incorreto no c√≥digo do frontend.

    Garantir que o WebSocket use uma URL v√°lida, idealmente via vari√°vel de ambiente:

const WS_URL = import.meta.env.VITE_WS_URL || `wss://${window.location.host}/api/ws`;

2. Pagina√ß√£o de conversas est√° incompleta

    A aplica√ß√£o carrega apenas 12 conversas inicialmente.

    O bot√£o "Carregar mais" existe, mas carrega somente mais 4 contatos, e para de carregar mesmo com mais de 60 conversas dispon√≠veis.

üõ† Funcionalidade esperada:

    Carregar 8 conversas por vez.

    Continuar carregando at√© que todas as conversas dispon√≠veis no backend sejam exibidas.

    O bot√£o ‚ÄúCarregar mais‚Äù s√≥ deve desaparecer quando n√£o houver mais nada para carregar.

3. Hist√≥rico de conversas e envio de mensagens n√£o funcionam

    Ao clicar em qualquer contato:

        Nenhuma mensagem antiga da conversa aparece no chat.

        N√£o √© exibido o hist√≥rico, mesmo para contatos com mensagens anteriores.

        Envio de mensagem n√£o apresenta erro, mas nada aparece na interface, mesmo com o console exibindo:

‚úÖ Conversas carregadas do backend: (12) [ { phoneNumber: '554187038339', contactName: 'Joao Lucas', ... }, ... ]
üìä Total de 12 conversas encontradas
Enviando mensagem: {connectionId: 34, to: '556791311050', message: 'sdsd'}
Enviando mensagem: {connectionId: 34, to: '556791311050', message: 'sdfsdf'}
Enviando mensagem: {connectionId: 34, to: '556791311050', message: 'dfsdfs'}

üõ† Corre√ß√µes esperadas:

    Ao selecionar um contato, a aplica√ß√£o deve:

        Carregar e exibir o hist√≥rico completo da conversa com esse n√∫mero.

        Mostrar as mensagens em tempo real recebidas via WebSocket.

        Permitir o envio de mensagens e exibir essas mensagens no chat imediatamente (com confirma√ß√£o de entrega, se poss√≠vel).

4. Filtro de pesquisa n√£o funciona globalmente

    O campo de pesquisa atual s√≥ busca entre os contatos j√° carregados.

    Ele n√£o pesquisa nas conversas que ainda n√£o foram exibidas, mesmo que existam dezenas no backend.

üõ† Funcionalidade esperada:

    A busca deve funcionar em todas as conversas dispon√≠veis na API.

    Deve permitir buscar por nome ou n√∫mero.

    Idealmente, deve usar debounce para evitar m√∫ltiplas chamadas desnecess√°rias √† API.

üîÑ RESUMO DAS CORRE√á√ïES NECESS√ÅRIAS
Item	Descri√ß√£o	Status
1Ô∏è‚É£	Corrigir fallback localhost:undefined no WebSocket	‚ùå
2Ô∏è‚É£	Corrigir o bot√£o "Carregar mais" para carregar em blocos de 8 e at√© o fim	‚ùå
3Ô∏è‚É£	Exibir hist√≥rico de conversa + mostrar/enviar mensagens corretamente	‚ùå
4Ô∏è‚É£	Fazer com que o filtro de busca funcione globalmente em todos os contatos	‚ùå

Posso enviar prints, c√≥digo ou logs adicionais se precisarem. Obrigado pela aten√ß√£o e aguardo retorno!